generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model ActivityLog {
  id        Int      @id @default(autoincrement())
  userId    Int      @map("user_id")
  systemId  Int      @map("system_id")
  ipAddress String?  @map("ip_address") @db.Inet
  action    String   @db.VarChar(255)
  details   Json?    @db.JsonB
  createdAt DateTime @default(now()) @map("created_at")

  // Back relation
  feedbacks UserFeedback[]

  @@map("activity_logs")
}

model UserFeedback {
  id            Int      @id @default(autoincrement())
  userId        Int      @map("user_id")
  systemId      Int      @map("system_id")
  activityLogId Int      @map("activity_log_id")
  comment       String?  @db.VarChar(255)
  createdAt     DateTime @default(now()) @map("created_at")

  // Relations
  activityLog ActivityLog @relation(fields: [activityLogId], references: [id], onDelete: Cascade, onUpdate: Cascade)

  @@map("user_feedback")
}
